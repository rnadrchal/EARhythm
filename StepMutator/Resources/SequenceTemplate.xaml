<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:model="clr-namespace:StepMutator.Models"
                    xmlns:wpf="clr-namespace:Material.Icons.WPF;assembly=Material.Icons.WPF"
                    xmlns:converters="clr-namespace:Egami.Sequencer.UI.Converters;assembly=Egami.Sequencer.UI">
    <BooleanToVisibilityConverter x:Key="BooleanToVisibility" />
    <converters:MultConverter x:Key="Multiply" />
    <converters:AddConverter x:Key="Add" />
    <converters:NoteNameConverter x:Key="NoteName" />
    <converters:BooleanToBrushConverter x:Key="BooleanToBrush"></converters:BooleanToBrushConverter>
    <DataTemplate DataType="{x:Type model:Step}">
        <Border>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="10" />
                    <RowDefinition Height="32" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <wpf:MaterialIcon Kind="ArrowRight" 
                                  Visibility="{Binding Tie, Converter={StaticResource BooleanToVisibility}}"  />
                <Rectangle Grid.Row="1" Fill="{Binding On, ConverterParameter=Orange, Converter={StaticResource BooleanToBrush}}"
                           Width="24" Height="{Binding Velocity, ConverterParameter=0.25, Converter={StaticResource Multiply}}"
                           VerticalAlignment="Bottom"/>
                <TextBlock Grid.Row="2" Text="{Binding Pitch, Converter={StaticResource NoteName}}"
                           HorizontalAlignment="Center" FontSize="10"
                           Visibility="{Binding On, Converter={StaticResource BooleanToVisibility}}"/>
            </Grid>
        </Border>
    </DataTemplate>

    <DataTemplate DataType="{x:Type model:ExtendedNote}">
        <Border>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="50" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <TextBlock Text="{Binding Pitch, Converter={StaticResource NoteName}}"
                           FontSize="10" HorizontalAlignment="Center" />
            </Grid>
        </Border>
    </DataTemplate>
    <DataTemplate DataType="{x:Type model:Sequence}">
        <Grid Margin="5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <TextBlock Grid.Column="0" Grid.Row="0" Grid.RowSpan="2"
                       VerticalAlignment="Center" HorizontalAlignment="Center"
                       Text="{Binding Length}" />
            <ScrollViewer Grid.Column="1" Grid.Row="0" Margin="5"
                          VerticalScrollBarVisibility="Hidden" HorizontalScrollBarVisibility="Auto">
                <ItemsControl ItemsSource="{Binding Steps}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </ScrollViewer>
            <ScrollViewer Grid.Column="1" Grid.Row="1"
                          VerticalScrollBarVisibility="Hidden" HorizontalScrollBarVisibility="Auto">
                <ItemsControl ItemsSource="{Binding Notes}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </ScrollViewer>

            <StackPanel Grid.Column="2" Grid.Row="0" Grid.RowSpan="2" Orientation="Vertical" VerticalAlignment="Center">
                <Button Style="{StaticResource Round3DButton}" Command="{Binding DyeCommand}"
                        Background="Orange">
                    <wpf:MaterialIcon Kind="Dice5" Width="24" Opacity="0.5" />
                </Button>
            </StackPanel>
        </Grid>

    </DataTemplate>
</ResourceDictionary>