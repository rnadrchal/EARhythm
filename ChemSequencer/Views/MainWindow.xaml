<Window x:Class="ChemSequencer.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:prism="http://prismlibrary.com/"
        xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
        xmlns:wpf="clr-namespace:Material.Icons.WPF;assembly=Material.Icons.WPF"
        syncfusion:SfSkinManager.Theme="{syncfusion:SkinManagerExtension ThemeName=FluentDark}"
        prism:ViewModelLocator.AutoWireViewModel="True"
        Title="{Binding Title}" Height="350" Width="525"
        WindowState="Maximized">
    <Grid>
        <Grid.Resources>
            <BooleanToVisibilityConverter x:Key="BooleanToVisibility" />
        </Grid.Resources>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <Border Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="3"
                Padding="5" BorderBrush="#444" BorderThickness="1">
            <!-- Grid statt horizontalem StackPanel: sorgt für eine echte Breitenbegrenzung -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <!-- Logo -->
                    <ColumnDefinition Width="Auto" />
                    <!-- Button -->
                    <ColumnDefinition Width="Auto" />
                    <!-- Separator -->
                    <ColumnDefinition Width="*" />
                    <!-- Sequencer (nimmt verbleibende Breite) -->
                </Grid.ColumnDefinitions>

                <Image Grid.Column="0" Source="/Resources/Images/Boltzmann.png" Width="250"
                       Margin="0,0,10,0" />

                <Button Grid.Column="1" HorizontalAlignment="Center"
                        Style="{StaticResource Round3DButton}"
                        Command="{Binding FindMoleculeCommand}"
                        Background="DarkRed">
                    <wpf:MaterialIcon Kind="Download" Width="24" Opacity="0.5" />
                </Button>

                <Separator Grid.Column="2" Margin="10,0" />

                <!-- WICHTIG: ContentControl in die Stern-Spalte, HorizontalAlignment="Stretch" -->
                <ContentControl Grid.Column="3" Content="{Binding SequencePlayer}"
                                VerticalAlignment="Center" HorizontalAlignment="Stretch" />
            </Grid>
        </Border>

        <ContentControl Grid.Column="0" Grid.Row="1" Content="{Binding Molecule}" ContentTemplate="{StaticResource MoleculeDisplayTemplate}" />
        <Grid Grid.Column="1" Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition />
            </Grid.RowDefinitions>
            <ContentControl Grid.Row="0" 
                            Content="{Binding SequencePlayer.Settings}"  />
            <ContentControl Grid.Row="1" Content="{Binding SequencePlayer.MoleculePlayback}"/>
        </Grid>

    </Grid>
</Window>
