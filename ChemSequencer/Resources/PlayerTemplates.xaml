<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:vm="clr-namespace:ChemSequencer.ViewModels"
                    xmlns:converters="clr-namespace:Egami.Sequencer.UI.Converters;assembly=Egami.Sequencer.UI"
                    xmlns:syncfusion="http://schemas.syncfusion.com/wpf">
    <converters:BooleanToOpacityConverter x:Key="BooleanToOpacity" />
    <converters:StringConverter x:Key="EnumToDouble" />
    <BooleanToVisibilityConverter x:Key="String" />
    <converters:BooleanToBrushConverter x:Key="BooleanToBrush" />
    <converters:EnumDisplayNameConverter x:Key="EnumDisplayName" />

    <Style TargetType="TextBlock" x:Key="TopLabelStyle">
        <Setter Property="Foreground" Value="#AAA" />
        <Setter Property="HorizontalAlignment" Value="Center" />
        <Setter Property="TextAlignment" Value="Center" />
        <Setter Property="Margin" Value="0,0,0,-10" />
    </Style>

    <Style TargetType="TextBlock" x:Key="BottomLabelStyle">
        <Setter Property="Foreground" Value="#AAA" />
        <Setter Property="HorizontalAlignment" Value="Center" />
        <Setter Property="TextAlignment" Value="Center" />
    </Style>

    <DataTemplate DataType="{x:Type vm:MoleculePlayer}">
        <StackPanel Orientation="Horizontal">
            <Ellipse Style="{StaticResource LedEllipseStyle}" Fill="OrangeRed" Stroke="DarkRed"
                     Opacity="{Binding LedOn, Converter={StaticResource BooleanToOpacity}}" 
                     Margin="5,0,10,0"/>
            <ItemsControl ItemsSource="{Binding StepLeds}" VerticalAlignment="Center">
                <ItemsControl.ItemTemplate>
                    <DataTemplate DataType="{x:Type vm:StepLed}">
                        <StackPanel Orientation="Vertical">
                            <Ellipse Style="{StaticResource LedEllipseStyle}"
                                     Opacity="{Binding IsCurrent, Converter={StaticResource BooleanToOpacity}}"
                                     Margin="5,0" />
                            <TextBlock Text="{Binding Index}" HorizontalAlignment="Center"
                                       Foreground="{Binding IsCurrent, Converter={StaticResource BooleanToBrush}, ConverterParameter=LightGreen}"></TextBlock>
                        </StackPanel>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
            </ItemsControl>
        </StackPanel>
    </DataTemplate>

    <DataTemplate DataType="{x:Type vm:PlayerSettings}">
        <WrapPanel Orientation="Horizontal">
            <GroupBox Header="Division">
                <Grid Margin="5">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" Style="{StaticResource TopLabelStyle}"
                               Text="{Binding Division, Converter={StaticResource EnumDisplayName}}" />

                    <syncfusion:SfRadialSlider Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Width="100" Height="80"
                                               Minimum="0" Maximum="10"
                                               Value="{Binding DivisionAsInt, Mode=TwoWay}"
                                               OuterRimRadiusFactor="0.6"
                                               OuterRimStroke="#444"
                                               OuterRimStrokeThickness="3"
                                               InnerRimFill="#444"
                                               InnerRimStroke="#444"
                                               InnerRimRadiusFactor="0.4"
                                               StartAngle="135" EndAngle="405"
                                               TickFrequency="1"
                                               TickVisibility="Visible"
                                               TickRadiusFactor="0.6" PointerRadiusFactor="0.5" 
                                               LabelVisibility="Hidden">
                    </syncfusion:SfRadialSlider>
                    <StackPanel Orientation="Vertical" Grid.Column="2" Grid.Row="0" Grid.RowSpan="2"
                                VerticalAlignment="Center">
                        <Button Style="{StaticResource Round3DButton}"
                                Margin="0,0,0,5"
                                Width="24" Height="24"
                                Background="{Binding Compressed, Converter={StaticResource BooleanToBrush}}" 
                                HorizontalAlignment="Center"
                                Command="{Binding ToggleCompressedCommand}">
                            <TextBlock Grid.Column="0" Grid.Row="3" Text="C" 
                                       FontSize="10" Margin="0,0,3,2" />
                        </Button>
                        <Button Style="{StaticResource Round3DButton}"
                                Margin="0,5,0,0"
                                Width="24" Height="24"
                                Background="{Binding Quantize, Converter={StaticResource BooleanToBrush}}" 
                                HorizontalAlignment="Center"
                                Command="{Binding ToggleQuantizeCommand}">
                            <TextBlock Grid.Column="0" Grid.Row="3" Text="Q" 
                                       FontSize="10" Margin="0,0,3,2" />
                        </Button>
                    </StackPanel>
                </Grid>
            </GroupBox>

            <GroupBox Header="Traversal">
                <Grid Margin="5">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Row="0" Grid.Column="0"  Style="{StaticResource TopLabelStyle}"
                               Text="{Binding TraversalMode, Converter={StaticResource EnumDisplayName}}" />

                    <syncfusion:SfRadialSlider Grid.Row="1" Grid.Column="0" Width="80" Height="80"
                                               Minimum="0" Maximum="2"
                                               Value="{Binding TraversalModeValue, Mode=TwoWay}"
                                               OuterRimRadiusFactor="0.6"
                                               OuterRimStroke="#444"
                                               OuterRimStrokeThickness="3"
                                               InnerRimFill="#444"
                                               InnerRimStroke="#444"
                                               InnerRimRadiusFactor="0.4"
                                               StartAngle="135" EndAngle="405"
                                               TickFrequency="1"
                                               TickVisibility="Visible"
                                               TickRadiusFactor="0.6" PointerRadiusFactor="0.5" 
                                               LabelVisibility="Hidden">
                    </syncfusion:SfRadialSlider>

                    <TextBlock Grid.Row="0" Grid.Column="1"  Style="{StaticResource TopLabelStyle}"
                               Text="Max. Revisits" />

                    <syncfusion:SfRadialSlider Grid.Row="1" Grid.Column="1" Width="80" Height="80"
                                               Minimum="0" Maximum="10"
                                               Value="{Binding MaxRevisitsPerRow, Mode=TwoWay}"
                                               OuterRimRadiusFactor="0.6"
                                               OuterRimStroke="#444"
                                               OuterRimStrokeThickness="3"
                                               InnerRimFill="#444"
                                               InnerRimStroke="#444"
                                               InnerRimRadiusFactor="0.4"
                                               StartAngle="135" EndAngle="405"
                                               TickFrequency="1"
                                               TickVisibility="Visible"
                                               TickRadiusFactor="0.6" PointerRadiusFactor="0.5" 
                                               LabelVisibility="Hidden">
                        <TextBlock Text="{Binding MaxRevisitsPerRow}" />
                    </syncfusion:SfRadialSlider>

                    <StackPanel Grid.Row="0" Grid.RowSpan="2" Grid.Column="2" Orientation="Vertical"
                                VerticalAlignment="Center">
                        <Button Style="{StaticResource Round3DButton}"
                                Width="24" Height="24"
                                Background="{Binding Polyphonic, Converter={StaticResource BooleanToBrush}}"
                                Command="{Binding TogglePolyphonicCommand}">
                            <TextBlock Text="P"></TextBlock>
                        </Button>
                    </StackPanel>

                </Grid>
            </GroupBox>

            <GroupBox Grid.Column="2" Grid.Row="0" Header="Backtrace">
                <Grid Margin="5">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Row="0" Grid.Column="0"  Style="{StaticResource TopLabelStyle}"
                               Text="{Binding BacktracePolicy, Converter={StaticResource EnumDisplayName}}" />

                    <syncfusion:SfRadialSlider Grid.Row="1" Grid.Column="0" Width="80" Height="80"
                                               Minimum="0" Maximum="4"
                                               Value="{Binding BacktracePolicyInt, Mode=TwoWay}"
                                               OuterRimRadiusFactor="0.6"
                                               OuterRimStroke="#444"
                                               OuterRimStrokeThickness="3"
                                               InnerRimFill="#444"
                                               InnerRimStroke="#444"
                                               InnerRimRadiusFactor="0.4"
                                               StartAngle="135" EndAngle="405"
                                               TickFrequency="1"
                                               TickVisibility="Visible"
                                               TickRadiusFactor="0.6" PointerRadiusFactor="0.5" 
                                               LabelVisibility="Hidden">
                    </syncfusion:SfRadialSlider>

                    <TextBlock Grid.Row="0" Grid.Column="1"  Style="{StaticResource TopLabelStyle}"
                               Text="Min. Depth" />

                    <syncfusion:SfRadialSlider Grid.Row="1" Grid.Column="1" Width="80" Height="80"
                                               Minimum="0" Maximum="10"
                                               Value="{Binding BacktrackMinDepth, Mode=TwoWay}"
                                               OuterRimRadiusFactor="0.6"
                                               OuterRimStroke="#444"
                                               OuterRimStrokeThickness="3"
                                               InnerRimFill="#444"
                                               InnerRimStroke="#444"
                                               InnerRimRadiusFactor="0.4"
                                               StartAngle="135" EndAngle="405"
                                               TickFrequency="1"
                                               TickVisibility="Visible"
                                               TickRadiusFactor="0.6" PointerRadiusFactor="0.5" 
                                               LabelVisibility="Hidden">
                        <TextBlock Text="{Binding MaxRevisitsPerRow}" />
                    </syncfusion:SfRadialSlider>
                </Grid>
            </GroupBox>
            <GroupBox Grid.Column="3" Grid.Row="0" Header="Backtracking">
                <Grid Margin="5">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>


                    <StackPanel Orientation="Vertical" Grid.Column="0" Grid.Row="0" Grid.RowSpan="2"
                                VerticalAlignment="Center">
                        <Button Style="{StaticResource Round3DButton}"
                                Margin="0,0,0,5"
                                Width="24" Height="24"
                                Background="{Binding MarkBacktracking, Converter={StaticResource BooleanToBrush}}" 
                                HorizontalAlignment="Center"
                                Command="{Binding ToggleMarkBacktrackingCommand}">
                            <TextBlock Grid.Column="0" Grid.Row="3" Text="M" 
                                       FontSize="10" Margin="0,0,3,2" />
                        </Button>
                        <Button Style="{StaticResource Round3DButton}"
                                Margin="0,5,0,0"
                                Width="24" Height="24"
                                Background="{Binding BacktrackInvertPitchbend, Converter={StaticResource BooleanToBrush}}" 
                                HorizontalAlignment="Center"
                                Command="{Binding ToggleBacktrackInvertPitchbendCommand}">
                            <TextBlock Grid.Column="0" Grid.Row="3" Text="I" 
                                       FontSize="10" Margin="0,0,3,2" />
                        </Button>
                    </StackPanel>

                    <TextBlock Grid.Row="0" Grid.Column="1"  Style="{StaticResource TopLabelStyle}"
                               Text="Velocity" />

                    <syncfusion:SfRadialSlider Grid.Row="1" Grid.Column="1" Width="80" Height="80"
                                               Minimum="0" Maximum="127"
                                               Value="{Binding BacktrackVelocityScale, Mode=TwoWay}"
                                               OuterRimRadiusFactor="0.6"
                                               OuterRimStroke="#444"
                                               OuterRimStrokeThickness="3"
                                               InnerRimFill="#444"
                                               InnerRimStroke="#444"
                                               InnerRimRadiusFactor="0.4"
                                               StartAngle="135" EndAngle="405"
                                               TickFrequency="16"
                                               TickVisibility="Visible"
                                               TickRadiusFactor="0.6" PointerRadiusFactor="0.5" 
                                               LabelVisibility="Hidden">
                        <TextBlock Text="{Binding BacktrackVelocityScale}" />
                    </syncfusion:SfRadialSlider>

                    <TextBlock Grid.Row="0" Grid.Column="2"  Style="{StaticResource TopLabelStyle}"
                               Text="PP Offs" />

                    <syncfusion:SfRadialSlider Grid.Row="1" Grid.Column="2" Width="80" Height="80"
                                               Minimum="0" Maximum="127"
                                               Value="{Binding BacktrackPitchbendOffset, Mode=TwoWay}"
                                               OuterRimRadiusFactor="0.6"
                                               OuterRimStroke="#444"
                                               OuterRimStrokeThickness="3"
                                               InnerRimFill="#444"
                                               InnerRimStroke="#444"
                                               InnerRimRadiusFactor="0.4"
                                               StartAngle="135" EndAngle="405"
                                               TickFrequency="16"
                                               TickVisibility="Visible"
                                               TickRadiusFactor="0.6" PointerRadiusFactor="0.5" 
                                               LabelVisibility="Hidden">
                        <TextBlock Text="{Binding BacktrackPitchbendOffset}" />
                    </syncfusion:SfRadialSlider>

                    <TextBlock Grid.Row="0" Grid.Column="3"  Style="{StaticResource TopLabelStyle}"
                               Text="CC" />

                    <syncfusion:SfRadialSlider Grid.Row="1" Grid.Column="3" Width="80" Height="80"
                                               Minimum="0" Maximum="127"
                                               Value="{Binding BacktrackMarkerCcValue, Mode=TwoWay}"
                                               OuterRimRadiusFactor="0.6"
                                               OuterRimStroke="#444"
                                               OuterRimStrokeThickness="3"
                                               InnerRimFill="#444"
                                               InnerRimStroke="#444"
                                               InnerRimRadiusFactor="0.4"
                                               StartAngle="135" EndAngle="405"
                                               TickFrequency="16"
                                               TickVisibility="Visible"
                                               TickRadiusFactor="0.6" PointerRadiusFactor="0.5" 
                                               LabelVisibility="Hidden">
                        <TextBlock Text="{Binding BacktrackMarkerCcValue}" />
                    </syncfusion:SfRadialSlider>
                </Grid>
            </GroupBox>

            <GroupBox Grid.Column="4" Grid.Row="0" Header="Step">
                <Grid Margin="5">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>


                    <StackPanel Orientation="Vertical" Grid.Column="0" Grid.Row="0" Grid.RowSpan="2"
                                VerticalAlignment="Center">
                        <Button Style="{StaticResource Round3DButton}"
                                Margin="0,0,0,5"
                                Width="24" Height="24"
                                Background="{Binding MarkBacktracking, Converter={StaticResource BooleanToBrush}}" 
                                HorizontalAlignment="Center"
                                Command="{Binding ToggleMarkBacktrackingCommand}">
                            <TextBlock Grid.Column="0" Grid.Row="3" Text="M" 
                                       FontSize="10" Margin="0,0,3,2" />
                        </Button>
                        <Button Style="{StaticResource Round3DButton}"
                                Margin="0,5,0,0"
                                Width="24" Height="24"
                                Background="{Binding BacktrackInvertPitchbend, Converter={StaticResource BooleanToBrush}}" 
                                HorizontalAlignment="Center"
                                Command="{Binding ToggleBacktrackInvertPitchbendCommand}">
                            <TextBlock Grid.Column="0" Grid.Row="3" Text="I" 
                                       FontSize="10" Margin="0,0,3,2" />
                        </Button>
                    </StackPanel>

                    <TextBlock Grid.Row="0" Grid.Column="1"  Style="{StaticResource TopLabelStyle}"
                               Text="Velocity" />

                    <syncfusion:SfRadialSlider Grid.Row="1" Grid.Column="1" Width="80" Height="80"
                                               Minimum="0" Maximum="127"
                                               Value="{Binding BacktrackVelocityScale, Mode=TwoWay}"
                                               OuterRimRadiusFactor="0.6"
                                               OuterRimStroke="#444"
                                               OuterRimStrokeThickness="3"
                                               InnerRimFill="#444"
                                               InnerRimStroke="#444"
                                               InnerRimRadiusFactor="0.4"
                                               StartAngle="135" EndAngle="405"
                                               TickFrequency="16"
                                               TickVisibility="Visible"
                                               TickRadiusFactor="0.6" PointerRadiusFactor="0.5" 
                                               LabelVisibility="Hidden">
                        <TextBlock Text="{Binding BacktrackVelocityScale}" />
                    </syncfusion:SfRadialSlider>

                    <TextBlock Grid.Row="0" Grid.Column="2"  Style="{StaticResource TopLabelStyle}"
                               Text="PP Offs" />

                    <syncfusion:SfRadialSlider Grid.Row="1" Grid.Column="2" Width="80" Height="80"
                                               Minimum="0" Maximum="127"
                                               Value="{Binding BacktrackPitchbendOffset, Mode=TwoWay}"
                                               OuterRimRadiusFactor="0.6"
                                               OuterRimStroke="#444"
                                               OuterRimStrokeThickness="3"
                                               InnerRimFill="#444"
                                               InnerRimStroke="#444"
                                               InnerRimRadiusFactor="0.4"
                                               StartAngle="135" EndAngle="405"
                                               TickFrequency="16"
                                               TickVisibility="Visible"
                                               TickRadiusFactor="0.6" PointerRadiusFactor="0.5" 
                                               LabelVisibility="Hidden">
                        <TextBlock Text="{Binding BacktrackPitchbendOffset}" />
                    </syncfusion:SfRadialSlider>

                    <TextBlock Grid.Row="0" Grid.Column="3"  Style="{StaticResource TopLabelStyle}"
                               Text="CC" />

                    <syncfusion:SfRadialSlider Grid.Row="1" Grid.Column="3" Width="80" Height="80"
                                               Minimum="0" Maximum="127"
                                               Value="{Binding BacktrackMarkerCcValue, Mode=TwoWay}"
                                               OuterRimRadiusFactor="0.6"
                                               OuterRimStroke="#444"
                                               OuterRimStrokeThickness="3"
                                               InnerRimFill="#444"
                                               InnerRimStroke="#444"
                                               InnerRimRadiusFactor="0.4"
                                               StartAngle="135" EndAngle="405"
                                               TickFrequency="16"
                                               TickVisibility="Visible"
                                               TickRadiusFactor="0.6" PointerRadiusFactor="0.5" 
                                               LabelVisibility="Hidden">
                        <TextBlock Text="{Binding BacktrackMarkerCcValue}" />
                    </syncfusion:SfRadialSlider>
                </Grid>
            </GroupBox>

        </WrapPanel>
    </DataTemplate>


</ResourceDictionary>