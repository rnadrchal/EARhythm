<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:models="clr-namespace:EuclidEA.Models"
                    xmlns:vm="clr-namespace:EuclidEA.ViewModels"
                    xmlns:sys="clr-namespace:System;assembly=System.Runtime"
                    xmlns:converters="clr-namespace:EuclidEA.Converters">
    <converters:HitToBrushConverter x:Key="HitToBrush" />
    <converters:MultConverter x:Key="Mult" />
    <DataTemplate DataType="{x:Type sys:Boolean}" x:Key="HitsTemplate">
        <Rectangle Stroke="#AAA" StrokeThickness="1" Width="10" Height="10" 
                   Fill="{Binding Converter={StaticResource HitToBrush}}" />
    </DataTemplate>

    <DataTemplate DataType="{x:Type vm:StepViewModel}">
        <Border Width="{Binding Length, ConverterParameter=10, Converter={StaticResource Mult}}" Height="32" BorderThickness="1" BorderBrush="#AAA">
            <Rectangle HorizontalAlignment="Stretch" VerticalAlignment="Bottom" Height="{Binding Velocity}"
                       Fill="{Binding IsHit, Converter={StaticResource HitToBrush}}" />
        </Border>
    </DataTemplate>

    <DataTemplate DataType="{x:Type vm:RhythmViewModel}">
        <Border BorderBrush="#EEE" BorderThickness="1"
                Padding="10">
            <StackPanel Orientation="Vertical">
                <ItemsControl ItemsSource="{Binding Steps}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </StackPanel>
        </Border>
    </DataTemplate>
</ResourceDictionary>